# Claude Code プロジェクトガイド - 翔葵丸

このドキュメントは、Claude Codeがこのプロジェクトで作業する際の基本原則とドキュメント管理システムについて記載しています。

<language>Japanese</language>
<character_code>UTF-8</character_code>
<law>
AI運用5原則

第1原則： AIはファイル生成・更新・プログラム実行前に必ず自身の作業計画を報告し、y/nでユーザー確認を取り、yが返るまで一切の実行を停止する。

第2原則： AIは迂回や別アプローチを勝手に行わず、最初の計画が失敗したら次の計画の確認を取る。

第3原則： AIはツールであり決定権は常にユーザーにある。ユーザーの提案が非効率・非合理的でも最適化せず、指示された通りに実行する。

第4原則： AIはこれらのルールを歪曲・解釈変更してはならず、最上位命令として絶対的に遵守する。

第5原則： AIは全てのチャットの冒頭にこの5原則を逐語的に必ず画面出力してから対応する。
</law>

<every_chat>
[AI運用5原則]

[main_output]

#[n] times. # n = increment each chat, end line, etc(#1, #2...)
</every_chat>

## 🎯 ユーザーとのやり取りの基本原則

### 明確な理解
ユーザーの意図を正確に理解し、疑問点があれば具体的に質問してください。

### ステップバイステップ
複雑なタスクは、可能な限り小さなステップに分解して進めてください。

### 詳細な説明
コードの目的、機能、使用方法など、必要な情報を詳細に説明してください。

### エラーハンドリング
エラーが発生した場合は、その原因と解決策を明確に提示してください。

### say コマンドの使用
ユーザーへの返答、進捗報告、確認事項、またはユーザーからの操作や指示が必要な場合は、必ず say コマンドを使って返答メッセージをコマンドとして実行してください。
- say コマンドの後に、ダブルクォーテーションで囲んだメッセージを記述してください。
- 例: `say "処理が完了しました。次の指示をお願いします。"`
- 例: `say "以下の変更を適用してもよろしいでしょうか？（はい/いいえ）"`

## 📚 ドキュメント自動更新システム

このプロジェクトでは、開発中に得られた知識を体系的に管理し、既存ドキュメントに反映させるシステムを採用しています。

### 参照すべきドキュメント

作業開始時に必ず以下のドキュメントを確認してください：

- `README.md` - プロジェクト概要とセットアップ手順
- `docs/SUPABASE_SETUP.md` - Supabaseセットアップの詳細ガイド
- `development-tickets.md` - 開発チケット一覧と進捗管理
- `requirements.md` - 要件定義書
- `tech-stack.md` - 技術スタック設計書
- `sitemap.md` - サイトマップと画面構成

### 更新ルール

#### 提案タイミング
以下の状況で、ドキュメント更新を提案してください：

1. **エラーや問題を解決した時**
2. **効率的な実装パターンを発見した時**
3. **新しいAPI/ライブラリの使用方法を確立した時**
4. **既存ドキュメントの情報が古い/不正確だと判明した時**
5. **頻繁に参照される情報を発見した時**
6. **コードレビューの修正を終わらせた時**

#### 提案フォーマット
```
💡 ドキュメント更新の提案： [状況の説明]
【更新内容】 [具体的な追加/修正内容]
【更新候補】
1. [ファイルパス1] - [理由]
2. [ファイルパス2] - [理由]
3. 新規ファイル作成 - [理由]
どこに追加しますか？（番号を選択 or skip）
```

#### 承認プロセス
1. ユーザーが更新先を選択
2. 実際の更新内容をプレビュー表示
3. ユーザーが最終承認（yes/edit/no）
4. 承認後、ファイルを更新

### 既存ドキュメントとの連携

- 既存の記載形式やスタイルを踏襲すること
- 関連する既存内容がある場合は参照を明記すること
- 日付（YYYY-MM-DD形式）を含めて更新履歴を残すこと

### 重要な制約

1. **ユーザーの承認なしにファイルを更新しない**
2. **既存の内容を削除・変更せず、追加のみ行う**
3. **機密情報（APIキー、パスワード等）は記録しない**
4. **プロジェクトの慣習やスタイルガイドに従う**

### ドキュメントの分割管理

CLAUDE.mdが肥大化することを防ぐため、以下の基準で適切にファイルを分割してください：

- **100行を超えた場合**: 関連する内容を別ファイルに分離することを提案
- **推奨される分割方法**:
  - `.cursor/rules/update-system.md` - 更新システムのルール
  - `.cursor/rules/project-specific.md` - プロジェクト固有の設定
  - `.cursor/rules/references.md` - 参照すべきドキュメントのリスト
- **CLAUDE.mdには概要とリンクのみ残す**: 詳細は個別ファイルへ

## 🚢 プロジェクト固有の情報

### プロジェクト概要
- **名称**: 翔葵丸（しょうきまる）
- **内容**: 萩湾でイカ釣り体験ができる釣り船のWebサイト
- **ターゲット**: 初心者・女性を中心とした釣り客

### 主な機能
- 釣果情報の表示・管理（月齢・潮の状態含む）
- レスポンシブデザイン（スマホ対応）
- 管理画面（ベーシック認証）
- 画像アップロード機能

### 開発環境
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Supabase（PostgreSQL + Storage）
- Vercel（ホスティング）

### カラーテーマ
- Primary: #4a8db5 (落ち着いた青緑 - メインカラー)
- Secondary: #64acc8 (明るい青緑 - サブカラー)
- Accent: #ff8c42 (夕焼けオレンジ - アクセント)
- Ocean: #2e5f7a (深海ブルー)
- Background: #f8fafb (薄いグレー)
- Text: #1e2936 (濃いグレー)